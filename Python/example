Writing using functions based context managers 